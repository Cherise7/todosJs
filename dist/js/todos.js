var arr=[],list=document.querySelector(".list"),itemNum=document.querySelector(".itemNum"),clearall=document.querySelector(".clearall"),btn=document.querySelector(".btn"),all=document.querySelector(".btn button:nth-child(1)"),active=document.querySelector(".btn button:nth-child(2)"),completed=document.querySelector(".btn button:nth-child(3)"),mulBtn=document.querySelector(".mulBtn"),addText=document.querySelector(".addText");function btnNoAct(){for(var e=0;e<btn.children.length;e++)btn.children[e].classList.remove("active")}function conshow(n,o){list.innerHTML="",num=0;for(var e=num2=0;e<arr.length;e++)list.innerHTML+=arr[e].content,n?arr[e].ischoose&&list.children[e].classList.add("none"):o&&(arr[e].ischoose||list.children[e].classList.add("none")),con=document.querySelectorAll(".con"),arr[e].ischoose?con[e].classList.add("delline"):con[e].classList.remove("delline"),chooseone=document.querySelectorAll(".chooseone"),chooseone[e].style.height=list.children[e].offsetHeight-20+"px",del=document.querySelectorAll(".del"),arr[e].ischoose?(chooseone[e].children[0].innerHTML="√",num2++):(chooseone[e].children[0].innerHTML="",num++);itemNum.innerHTML=num,num2?clearall.style.display="block":clearall.style.display="none",console.log(chooseone);for(var t=0;t<chooseone.length;t++)chooseone[t].setAttribute("index",t),chooseone[t].onclick=function(){ind=this.getAttribute("index"),chooseone[ind].children[0].innerHTML?(arrjudge(!1,this.parentNode),conshow(n,o),chooseone[ind].children[0].innerHTML=""):(arrjudge(!0,this.parentNode),conshow(n,o),chooseone[ind].children[0].innerHTML="√")};for(var c=0;c<list.children.length;c++)list.children[c].setAttribute("ind",c),list.children[c].onmouseover=function(){var e=this.getAttribute("ind");this.children[2].style.display="block",del[e].onclick=function(){arr.splice(e,1),conshow(!1,!1)}},list.children[c].onmouseleave=function(){this.children[2].style.display="none"};mulBtn.onclick=function(){if(mulBtn.classList.contains("chooall")){mulBtn.classList.remove("chooall");for(var e=0;e<arr.length;e++)arr[e].ischoose=!1,conshow(n,o)}else{mulBtn.classList.add("chooall");for(e=0;e<arr.length;e++)arr[e].ischoose=!0,conshow(n,o)}}}function arrjudge(e,n){for(var o=0;o<list.children.length;o++)list.children[o]==n&&(arr[o].ischoose=e)}all.onfocus=function(){btnNoAct(),this.classList.add("active"),conshow(!1,!1)},active.onfocus=function(){btnNoAct(),this.classList.add("active"),conshow(!0,!1)},completed.onfocus=function(){btnNoAct(),this.classList.add("active"),conshow(!1,!0)},clearall.onclick=function(){for(var e=0;e<arr.length;e++)if(arr[e].ischoose){arr.splice(e,1),e--;for(var n=0;n<btn.children.length;n++)btn.children[n].classList.contains("active")&&(console.log(btn.children[n]),btn.children[n].onfocus())}},addText.onkeyup=function(e){13==(e=event||e).keyCode&&""!=addText.value&&(arr.push({content:"<li><div class ='chooseone'><span>√</span></div><span class = 'con'>"+addText.value+"</span><span class='del'>×</span></li>",ischoose:!1}),addText.value="",conshow(!1,!1))};